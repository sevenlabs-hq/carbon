{% extends "layout.njk" %}

{% block main %}
use solana_pubkey::Pubkey;
pub struct {{ program.name | pascalCase }}Decoder;
pub const PROGRAM_ID: Pubkey = solana_pubkey::Pubkey::from_str_const("{{ program.publicKey }}");

pub mod accounts;
{% if instructionsToExport.length > 0 %}
pub mod instructions;
{% endif %}
{% if definedTypesToExport.length > 0 %}
pub mod types;
{% endif %}
{% if hasAnchorEvents %}
pub mod events;
{% endif%}
{% if withGraphQL %}
#[cfg(feature = "graphql")]
pub mod graphql;
{% endif %}
{% if withBase58 %}
#[cfg(feature = "base58")]
mod base58 {
    use serde::Serialize;
    use serde::Serializer;
    use solana_pubkey::Pubkey;

    pub fn serialize<S: Serializer>(pubkey: &Pubkey, s: S) -> Result<S::Ok, S::Error> {
        let base58 = pubkey.to_string();
        String::serialize(&base58, s)
    }

    pub fn serialize_option<S: Serializer>(pubkey: &Option<Pubkey>, s: S) -> Result<S::Ok, S::Error> {
        match pubkey {
            Some(pk) => {
                let base58 = pk.to_string();
                Option::<String>::serialize(&Some(base58), s)
            }
            None => Option::<String>::serialize(&None, s)
        }
    }
}
{% endif %}
{% endblock %}