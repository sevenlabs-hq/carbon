{% block main %}
[package]
name = "carbon-{{ packageName | default(program.name | kebabCase) }}-decoder"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["rlib"]

[features]
default = []
{%- if withSerde or withPostgres or withGraphQL %}

serde = ["dep:serde", "dep:serde-big-array"]
{% endif %}
{%- if withPostgres %}

postgres = [
    "carbon-core/postgres",
    "dep:sqlx",
    "dep:async-trait",
    "dep:sqlx_migrator",
    "serde",
]
{% endif %}
{%- if withGraphQL %}

graphql = [
    "carbon-core/graphql",
    "dep:juniper",
    "dep:base64",
    "serde",
]
{% endif %}

[dependencies]
# Core dependencies
{{ carbonCoreDep }}
{{ borshDep }}
{{ solanaPubkeyDep }}
{{ solanaAccountDep }}
{{ solanaInstructionDep }}
{{ serdeJsonDep }}

# Serialization (optional)
{{ serdeDep }}
{{ serdeBigArrayDep }}

# Postgres dependencies (optional)
{{ sqlxDep }}
{{ asyncTraitDep }}
{{ sqlxMigratorDep }}

# GraphQL dependencies (optional)
{{ juniperDep }}
{{ base64Dep }}


[dev-dependencies]
{{ carbonTestUtilsDep }}

{% endblock %}