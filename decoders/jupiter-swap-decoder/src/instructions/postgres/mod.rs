//! This code was AUTOGENERATED using the Codama library.
pub mod claim_row;
pub mod claim_token_row;
pub mod close_token_row;
pub mod cpi_event_row;
pub mod create_token_account_row;
pub mod create_token_ledger_row;
pub mod exact_out_route_row;
pub mod exact_out_route_v2_row;
pub mod route_row;
pub mod route_v2_row;
pub mod route_with_token_ledger_row;
pub mod set_token_ledger_row;
pub mod shared_accounts_exact_out_route_row;
pub mod shared_accounts_exact_out_route_v2_row;
pub mod shared_accounts_route_row;
pub mod shared_accounts_route_v2_row;
pub mod shared_accounts_route_with_token_ledger_row;

pub use self::claim_row::*;
pub use self::claim_token_row::*;
pub use self::close_token_row::*;
pub use self::cpi_event_row::*;
pub use self::create_token_account_row::*;
pub use self::create_token_ledger_row::*;
pub use self::exact_out_route_row::*;
pub use self::exact_out_route_v2_row::*;
pub use self::route_row::*;
pub use self::route_v2_row::*;
pub use self::route_with_token_ledger_row::*;
pub use self::set_token_ledger_row::*;
pub use self::shared_accounts_exact_out_route_row::*;
pub use self::shared_accounts_exact_out_route_v2_row::*;
pub use self::shared_accounts_route_row::*;
pub use self::shared_accounts_route_v2_row::*;
pub use self::shared_accounts_route_with_token_ledger_row::*;

use super::JupiterSwapInstruction;

pub struct JupiterSwapInstructionsMigration;

impl sqlx_migrator::Migration<sqlx::Postgres> for JupiterSwapInstructionsMigration {
    fn app(&self) -> &str {
        "jupiter-swap"
    }

    fn name(&self) -> &str {
        "jupiter_swap_instructions"
    }

    fn operations(&self) -> Vec<Box<dyn sqlx_migrator::Operation<sqlx::Postgres>>> {
        vec![
            Box::new(ClaimMigrationOperation),
            Box::new(ClaimTokenMigrationOperation),
            Box::new(CloseTokenMigrationOperation),
            Box::new(CreateTokenAccountMigrationOperation),
            Box::new(CreateTokenLedgerMigrationOperation),
            Box::new(ExactOutRouteMigrationOperation),
            Box::new(ExactOutRouteV2MigrationOperation),
            Box::new(RouteMigrationOperation),
            Box::new(RouteV2MigrationOperation),
            Box::new(RouteWithTokenLedgerMigrationOperation),
            Box::new(SetTokenLedgerMigrationOperation),
            Box::new(SharedAccountsExactOutRouteMigrationOperation),
            Box::new(SharedAccountsExactOutRouteV2MigrationOperation),
            Box::new(SharedAccountsRouteMigrationOperation),
            Box::new(SharedAccountsRouteV2MigrationOperation),
            Box::new(SharedAccountsRouteWithTokenLedgerMigrationOperation),
            Box::new(CpiEventMigrationOperation),
        ]
    }

    fn parents(&self) -> Vec<Box<dyn sqlx_migrator::Migration<sqlx::Postgres>>> {
        vec![]
    }
}

pub struct JupiterSwapInstructionWithMetadata(
    pub JupiterSwapInstruction,
    pub carbon_core::instruction::InstructionMetadata,
    pub Vec<solana_instruction::AccountMeta>,
);

impl
    From<(
        JupiterSwapInstruction,
        carbon_core::instruction::InstructionMetadata,
        Vec<solana_instruction::AccountMeta>,
    )> for JupiterSwapInstructionWithMetadata
{
    fn from(
        value: (
            JupiterSwapInstruction,
            carbon_core::instruction::InstructionMetadata,
            Vec<solana_instruction::AccountMeta>,
        ),
    ) -> Self {
        JupiterSwapInstructionWithMetadata(value.0, value.1, value.2)
    }
}

#[async_trait::async_trait]
impl carbon_core::postgres::operations::Insert for JupiterSwapInstructionWithMetadata {
    async fn insert(&self, pool: &sqlx::PgPool) -> carbon_core::error::CarbonResult<()> {
        let JupiterSwapInstructionWithMetadata(instruction, metadata, accounts) = self;
        match instruction {
            JupiterSwapInstruction::Claim(instruction) => {
                let row = claim_row::ClaimRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::ClaimToken(instruction) => {
                let row = claim_token_row::ClaimTokenRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CloseToken(instruction) => {
                let row = close_token_row::CloseTokenRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CreateTokenLedger(instruction) => {
                let row = create_token_ledger_row::CreateTokenLedgerRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CreateTokenAccount(instruction) => {
                let row = create_token_account_row::CreateTokenAccountRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::ExactOutRoute(instruction) => {
                let row = exact_out_route_row::ExactOutRouteRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::Route(instruction) => {
                let row = route_row::RouteRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::RouteWithTokenLedger(instruction) => {
                let row = route_with_token_ledger_row::RouteWithTokenLedgerRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SetTokenLedger(instruction) => {
                let row = set_token_ledger_row::SetTokenLedgerRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsExactOutRoute(instruction) => {
                let row =
                    shared_accounts_exact_out_route_row::SharedAccountsExactOutRouteRow::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsRoute(instruction) => {
                let row = shared_accounts_route_row::SharedAccountsRouteRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsRouteWithTokenLedger(instruction) => {
                let row = shared_accounts_route_with_token_ledger_row::SharedAccountsRouteWithTokenLedgerRow::from_parts(instruction.clone(), metadata.clone(), accounts.clone());
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::ExactOutRouteV2(instruction) => {
                let row = exact_out_route_v2_row::ExactOutRouteV2Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::RouteV2(instruction) => {
                let row = route_v2_row::RouteV2Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsExactOutRouteV2(instruction) => {
                let row = shared_accounts_exact_out_route_v2_row::SharedAccountsExactOutRouteV2Row::from_parts(instruction.clone(), metadata.clone(), accounts.clone());
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsRouteV2(instruction) => {
                let row = shared_accounts_route_v2_row::SharedAccountsRouteV2Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CpiEvent(instruction) => {
                let row = cpi_event_row::CpiEventRow::from_parts(
                    (**instruction).clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
        }
    }
}

#[async_trait::async_trait]
impl carbon_core::postgres::operations::Upsert for JupiterSwapInstructionWithMetadata {
    async fn upsert(&self, pool: &sqlx::PgPool) -> carbon_core::error::CarbonResult<()> {
        let JupiterSwapInstructionWithMetadata(instruction, metadata, accounts) = self;
        match instruction {
            JupiterSwapInstruction::Claim(instruction) => {
                let row = claim_row::ClaimRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::ClaimToken(instruction) => {
                let row = claim_token_row::ClaimTokenRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CloseToken(instruction) => {
                let row = close_token_row::CloseTokenRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CreateTokenLedger(instruction) => {
                let row = create_token_ledger_row::CreateTokenLedgerRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CreateTokenAccount(instruction) => {
                let row = create_token_account_row::CreateTokenAccountRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::ExactOutRoute(instruction) => {
                let row = exact_out_route_row::ExactOutRouteRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::Route(instruction) => {
                let row = route_row::RouteRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::RouteWithTokenLedger(instruction) => {
                let row = route_with_token_ledger_row::RouteWithTokenLedgerRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SetTokenLedger(instruction) => {
                let row = set_token_ledger_row::SetTokenLedgerRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsExactOutRoute(instruction) => {
                let row =
                    shared_accounts_exact_out_route_row::SharedAccountsExactOutRouteRow::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsRoute(instruction) => {
                let row = shared_accounts_route_row::SharedAccountsRouteRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsRouteWithTokenLedger(instruction) => {
                let row = shared_accounts_route_with_token_ledger_row::SharedAccountsRouteWithTokenLedgerRow::from_parts(instruction.clone(), metadata.clone(), accounts.clone());
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::ExactOutRouteV2(instruction) => {
                let row = exact_out_route_v2_row::ExactOutRouteV2Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::RouteV2(instruction) => {
                let row = route_v2_row::RouteV2Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsExactOutRouteV2(instruction) => {
                let row = shared_accounts_exact_out_route_v2_row::SharedAccountsExactOutRouteV2Row::from_parts(instruction.clone(), metadata.clone(), accounts.clone());
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::SharedAccountsRouteV2(instruction) => {
                let row = shared_accounts_route_v2_row::SharedAccountsRouteV2Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            JupiterSwapInstruction::CpiEvent(instruction) => {
                let row = cpi_event_row::CpiEventRow::from_parts(
                    (**instruction).clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
        }
    }
}
