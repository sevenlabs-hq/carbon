//! This code was AUTOGENERATED using the Codama library.

pub use super::super::events;
use carbon_core::{borsh, deserialize::ArrangeAccounts};

#[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
#[derive(
    Debug,
    Clone,
    carbon_core::borsh::BorshSerialize,
    carbon_core::borsh::BorshDeserialize,
    PartialEq,
)]
pub enum CpiEvent {
    AddResolverEvent(events::add_resolver_event::AddResolverEventEvent),
    CancelOrderEvent(events::cancel_order_event::CancelOrderEventEvent),
    FillOrderEvent(events::fill_order_event::FillOrderEventEvent),
    InitGlobalConfigEvent(events::init_global_config_event::InitGlobalConfigEventEvent),
    PauseTradingEvent(events::pause_trading_event::PauseTradingEventEvent),
    PlaceOrderEvent(events::place_order_event::PlaceOrderEventEvent),
    RefundEvent(events::refund_event::RefundEventEvent),
    RemoveResolverEvent(events::remove_resolver_event::RemoveResolverEventEvent),
    SetAdminEvent(events::set_admin_event::SetAdminEventEvent),
    SetFeeMultiplierEvent(events::set_fee_multiplier_event::SetFeeMultiplierEventEvent),
    SetTradeFeeEvent(events::set_trade_fee_event::SetTradeFeeEventEvent),
    SwapEvent(events::swap_event::SwapEventEvent),
    UpdateOrderEvent(events::update_order_event::UpdateOrderEventEvent),
}

#[derive(Debug, Clone, PartialEq)]
#[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
pub struct CpiEventInstructionAccounts {
    pub program: solana_pubkey::Pubkey,
    pub event_authority: solana_pubkey::Pubkey,
    pub remaining: Vec<solana_instruction::AccountMeta>,
}

impl CpiEvent {
    pub fn decode(data: &[u8]) -> Option<Self> {
        if data.len() < 8 {
            return None;
        }
        let discriminator = &data[0..8];
        if discriminator != [228, 69, 165, 46, 81, 203, 154, 29] {
            return None;
        }

        let event_data = &data[8..];

        if let Some(decoded) = events::add_resolver_event::AddResolverEventEvent::decode(event_data)
        {
            return Some(CpiEvent::AddResolverEvent(decoded));
        }
        if let Some(decoded) = events::cancel_order_event::CancelOrderEventEvent::decode(event_data)
        {
            return Some(CpiEvent::CancelOrderEvent(decoded));
        }
        if let Some(decoded) = events::fill_order_event::FillOrderEventEvent::decode(event_data) {
            return Some(CpiEvent::FillOrderEvent(decoded));
        }
        if let Some(decoded) =
            events::init_global_config_event::InitGlobalConfigEventEvent::decode(event_data)
        {
            return Some(CpiEvent::InitGlobalConfigEvent(decoded));
        }
        if let Some(decoded) =
            events::pause_trading_event::PauseTradingEventEvent::decode(event_data)
        {
            return Some(CpiEvent::PauseTradingEvent(decoded));
        }
        if let Some(decoded) = events::place_order_event::PlaceOrderEventEvent::decode(event_data) {
            return Some(CpiEvent::PlaceOrderEvent(decoded));
        }
        if let Some(decoded) = events::refund_event::RefundEventEvent::decode(event_data) {
            return Some(CpiEvent::RefundEvent(decoded));
        }
        if let Some(decoded) =
            events::remove_resolver_event::RemoveResolverEventEvent::decode(event_data)
        {
            return Some(CpiEvent::RemoveResolverEvent(decoded));
        }
        if let Some(decoded) = events::set_admin_event::SetAdminEventEvent::decode(event_data) {
            return Some(CpiEvent::SetAdminEvent(decoded));
        }
        if let Some(decoded) =
            events::set_fee_multiplier_event::SetFeeMultiplierEventEvent::decode(event_data)
        {
            return Some(CpiEvent::SetFeeMultiplierEvent(decoded));
        }
        if let Some(decoded) =
            events::set_trade_fee_event::SetTradeFeeEventEvent::decode(event_data)
        {
            return Some(CpiEvent::SetTradeFeeEvent(decoded));
        }
        if let Some(decoded) = events::swap_event::SwapEventEvent::decode(event_data) {
            return Some(CpiEvent::SwapEvent(decoded));
        }
        if let Some(decoded) = events::update_order_event::UpdateOrderEventEvent::decode(event_data)
        {
            return Some(CpiEvent::UpdateOrderEvent(decoded));
        }
        None
    }
}

impl ArrangeAccounts for CpiEvent {
    type ArrangedAccounts = CpiEventInstructionAccounts;

    fn arrange_accounts(
        accounts: &[solana_instruction::AccountMeta],
    ) -> Option<Self::ArrangedAccounts> {
        let [program, event_authority, remaining @ ..] = accounts else {
            return None;
        };

        Some(CpiEventInstructionAccounts {
            program: program.pubkey,
            event_authority: event_authority.pubkey,
            remaining: remaining.to_vec(),
        })
    }
}
