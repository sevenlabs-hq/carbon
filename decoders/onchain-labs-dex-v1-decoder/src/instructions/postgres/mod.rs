//! This code was AUTOGENERATED using the Codama library.
pub mod claim_row;
pub mod commission_sol_proxy_swap_row;
pub mod commission_sol_swap_row;
pub mod commission_spl_proxy_swap_row;
pub mod commission_spl_swap_row;
pub mod commission_wrap_unwrap_row;
pub mod cpi_event_row;
pub mod create_token_account_row;
pub mod create_token_account_with_seed_row;
pub mod platform_fee_sol_proxy_swap_v2_row;
pub mod platform_fee_sol_wrap_unwrap_v2_row;
pub mod platform_fee_spl_proxy_swap_v2_row;
pub mod proxy_swap_row;
pub mod swap_row;
pub mod swap_tob_v3_enhanced_row;
pub mod swap_tob_v3_row;
pub mod swap_tob_v3_with_receiver_row;
pub mod swap_v3_row;
pub mod wrap_unwrap_v3_row;
pub mod wrap_unwrap_v3_with_receiver_row;

pub use self::{
    claim_row::*, commission_sol_proxy_swap_row::*, commission_sol_swap_row::*,
    commission_spl_proxy_swap_row::*, commission_spl_swap_row::*, commission_wrap_unwrap_row::*,
    cpi_event_row::*, create_token_account_row::*, create_token_account_with_seed_row::*,
    platform_fee_sol_proxy_swap_v2_row::*, platform_fee_sol_wrap_unwrap_v2_row::*,
    platform_fee_spl_proxy_swap_v2_row::*, proxy_swap_row::*, swap_row::*,
    swap_tob_v3_enhanced_row::*, swap_tob_v3_row::*, swap_tob_v3_with_receiver_row::*,
    swap_v3_row::*, wrap_unwrap_v3_row::*, wrap_unwrap_v3_with_receiver_row::*,
};
use super::OnchainLabsDexV1Instruction;

pub struct OnchainLabsDexV1InstructionsMigration;

impl sqlx_migrator::Migration<sqlx::Postgres> for OnchainLabsDexV1InstructionsMigration {
    fn app(&self) -> &str {
        "onchain-labs-dex-v1"
    }

    fn name(&self) -> &str {
        "onchain_labs_dex_v1_instructions"
    }

    fn operations(&self) -> Vec<Box<dyn sqlx_migrator::Operation<sqlx::Postgres>>> {
        vec![
            Box::new(ClaimMigrationOperation),
            Box::new(CommissionSolProxySwapMigrationOperation),
            Box::new(CommissionSolSwapMigrationOperation),
            Box::new(CommissionSplProxySwapMigrationOperation),
            Box::new(CommissionSplSwapMigrationOperation),
            Box::new(CommissionWrapUnwrapMigrationOperation),
            Box::new(CreateTokenAccountMigrationOperation),
            Box::new(CreateTokenAccountWithSeedMigrationOperation),
            Box::new(PlatformFeeSolProxySwapV2MigrationOperation),
            Box::new(PlatformFeeSolWrapUnwrapV2MigrationOperation),
            Box::new(PlatformFeeSplProxySwapV2MigrationOperation),
            Box::new(ProxySwapMigrationOperation),
            Box::new(SwapMigrationOperation),
            Box::new(SwapTobV3MigrationOperation),
            Box::new(SwapTobV3EnhancedMigrationOperation),
            Box::new(SwapTobV3WithReceiverMigrationOperation),
            Box::new(SwapV3MigrationOperation),
            Box::new(WrapUnwrapV3MigrationOperation),
            Box::new(WrapUnwrapV3WithReceiverMigrationOperation),
            Box::new(CpiEventMigrationOperation),
        ]
    }

    fn parents(&self) -> Vec<Box<dyn sqlx_migrator::Migration<sqlx::Postgres>>> {
        vec![]
    }
}

pub struct OnchainLabsDexV1InstructionWithMetadata(
    pub OnchainLabsDexV1Instruction,
    pub carbon_core::instruction::InstructionMetadata,
    pub Vec<solana_instruction::AccountMeta>,
);

impl
    From<(
        OnchainLabsDexV1Instruction,
        carbon_core::instruction::InstructionMetadata,
        Vec<solana_instruction::AccountMeta>,
    )> for OnchainLabsDexV1InstructionWithMetadata
{
    fn from(
        value: (
            OnchainLabsDexV1Instruction,
            carbon_core::instruction::InstructionMetadata,
            Vec<solana_instruction::AccountMeta>,
        ),
    ) -> Self {
        OnchainLabsDexV1InstructionWithMetadata(value.0, value.1, value.2)
    }
}

#[async_trait::async_trait]
impl carbon_core::postgres::operations::Insert for OnchainLabsDexV1InstructionWithMetadata {
    async fn insert(&self, pool: &sqlx::PgPool) -> carbon_core::error::CarbonResult<()> {
        let OnchainLabsDexV1InstructionWithMetadata(instruction, metadata, accounts) = self;
        match instruction {
            OnchainLabsDexV1Instruction::Claim(instruction) => {
                let row = claim_row::ClaimRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSolProxySwap(instruction) => {
                let row = commission_sol_proxy_swap_row::CommissionSolProxySwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSolSwap(instruction) => {
                let row = commission_sol_swap_row::CommissionSolSwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSplProxySwap(instruction) => {
                let row = commission_spl_proxy_swap_row::CommissionSplProxySwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSplSwap(instruction) => {
                let row = commission_spl_swap_row::CommissionSplSwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionWrapUnwrap(instruction) => {
                let row = commission_wrap_unwrap_row::CommissionWrapUnwrapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CreateTokenAccount(instruction) => {
                let row = create_token_account_row::CreateTokenAccountRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CreateTokenAccountWithSeed(instruction) => {
                let row =
                    create_token_account_with_seed_row::CreateTokenAccountWithSeedRow::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::PlatformFeeSolProxySwapV2(instruction) => {
                let row =
                    platform_fee_sol_proxy_swap_v2_row::PlatformFeeSolProxySwapV2Row::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::PlatformFeeSolWrapUnwrapV2(instruction) => {
                let row =
                    platform_fee_sol_wrap_unwrap_v2_row::PlatformFeeSolWrapUnwrapV2Row::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::PlatformFeeSplProxySwapV2(instruction) => {
                let row =
                    platform_fee_spl_proxy_swap_v2_row::PlatformFeeSplProxySwapV2Row::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::ProxySwap(instruction) => {
                let row = proxy_swap_row::ProxySwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::Swap(instruction) => {
                let row = swap_row::SwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapTobV3(instruction) => {
                let row = swap_tob_v3_row::SwapTobV3Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapTobV3Enhanced(instruction) => {
                let row = swap_tob_v3_enhanced_row::SwapTobV3EnhancedRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapTobV3WithReceiver(instruction) => {
                let row = swap_tob_v3_with_receiver_row::SwapTobV3WithReceiverRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapV3(instruction) => {
                let row = swap_v3_row::SwapV3Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::WrapUnwrapV3(instruction) => {
                let row = wrap_unwrap_v3_row::WrapUnwrapV3Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::WrapUnwrapV3WithReceiver(instruction) => {
                let row = wrap_unwrap_v3_with_receiver_row::WrapUnwrapV3WithReceiverRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CpiEvent(instruction) => {
                let row = cpi_event_row::CpiEventRow::from_parts(
                    (**instruction).clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.insert(pool).await?;
                Ok(())
            }
        }
    }
}

#[async_trait::async_trait]
impl carbon_core::postgres::operations::Upsert for OnchainLabsDexV1InstructionWithMetadata {
    async fn upsert(&self, pool: &sqlx::PgPool) -> carbon_core::error::CarbonResult<()> {
        let OnchainLabsDexV1InstructionWithMetadata(instruction, metadata, accounts) = self;
        match instruction {
            OnchainLabsDexV1Instruction::Claim(instruction) => {
                let row = claim_row::ClaimRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSolProxySwap(instruction) => {
                let row = commission_sol_proxy_swap_row::CommissionSolProxySwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSolSwap(instruction) => {
                let row = commission_sol_swap_row::CommissionSolSwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSplProxySwap(instruction) => {
                let row = commission_spl_proxy_swap_row::CommissionSplProxySwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionSplSwap(instruction) => {
                let row = commission_spl_swap_row::CommissionSplSwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CommissionWrapUnwrap(instruction) => {
                let row = commission_wrap_unwrap_row::CommissionWrapUnwrapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CreateTokenAccount(instruction) => {
                let row = create_token_account_row::CreateTokenAccountRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CreateTokenAccountWithSeed(instruction) => {
                let row =
                    create_token_account_with_seed_row::CreateTokenAccountWithSeedRow::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::PlatformFeeSolProxySwapV2(instruction) => {
                let row =
                    platform_fee_sol_proxy_swap_v2_row::PlatformFeeSolProxySwapV2Row::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::PlatformFeeSolWrapUnwrapV2(instruction) => {
                let row =
                    platform_fee_sol_wrap_unwrap_v2_row::PlatformFeeSolWrapUnwrapV2Row::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::PlatformFeeSplProxySwapV2(instruction) => {
                let row =
                    platform_fee_spl_proxy_swap_v2_row::PlatformFeeSplProxySwapV2Row::from_parts(
                        instruction.clone(),
                        metadata.clone(),
                        accounts.clone(),
                    );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::ProxySwap(instruction) => {
                let row = proxy_swap_row::ProxySwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::Swap(instruction) => {
                let row = swap_row::SwapRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapTobV3(instruction) => {
                let row = swap_tob_v3_row::SwapTobV3Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapTobV3Enhanced(instruction) => {
                let row = swap_tob_v3_enhanced_row::SwapTobV3EnhancedRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapTobV3WithReceiver(instruction) => {
                let row = swap_tob_v3_with_receiver_row::SwapTobV3WithReceiverRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::SwapV3(instruction) => {
                let row = swap_v3_row::SwapV3Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::WrapUnwrapV3(instruction) => {
                let row = wrap_unwrap_v3_row::WrapUnwrapV3Row::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::WrapUnwrapV3WithReceiver(instruction) => {
                let row = wrap_unwrap_v3_with_receiver_row::WrapUnwrapV3WithReceiverRow::from_parts(
                    instruction.clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
            OnchainLabsDexV1Instruction::CpiEvent(instruction) => {
                let row = cpi_event_row::CpiEventRow::from_parts(
                    (**instruction).clone(),
                    metadata.clone(),
                    accounts.clone(),
                );
                row.upsert(pool).await?;
                Ok(())
            }
        }
    }
}
